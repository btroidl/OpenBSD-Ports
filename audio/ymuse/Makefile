COMMENT=		GTK front-end for MPD

VERSION=		0.21
PKGNAME=		ymuse-${VERSION}
REVISION=		0

# ymuse-vendored distfile generated by fetching archive from
# https://github.com/yktoo/ymuse/archive/v$VERSION/ymuse-$VERSION.tar.gz
# and running "go mod tidy" + "go mod vendor"
DISTNAME=		ymuse-vendored-${VERSION}
SITES=			https://distfiles.bsdfrog.org/
ALL_TARGET=		github.com/yktoo/ymuse

CATEGORIES=		audio x11

HOMEPAGE=		https://yktoo.com/en/software/ymuse/

MAINTAINER=		Antoine Jacoutot <ajacoutot@openbsd.org>

# Apache-2.0
PERMIT_PACKAGE=		Yes

WANTLIB += atk-1.0 c cairo cairo-gobject fontconfig freetype gdk-3
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gtk-3 harfbuzz intl pango-1.0 pangocairo-1.0 pthread

MODULES=		lang/go

LIB_DEPENDS=		x11/gtk+3

RUN_DEPENDS=		devel/desktop-file-utils \
			x11/gtk+4,-guic

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/{applications,icons,metainfo}
	cp -R ${WRKSRC}/resources/icons/* ${PREFIX}/share/icons/
	${INSTALL_DATA} \
		${WRKSRC}/resources/metainfo/com.yktoo.ymuse.metainfo.xml \
		${PREFIX}/share/metainfo/
	${INSTALL_DATA} ${WRKSRC}/resources/com.yktoo.ymuse.desktop \
		${PREFIX}/share/applications/
	chown -R ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/{applications,icons,metainfo}/*

.include <bsd.port.mk>
